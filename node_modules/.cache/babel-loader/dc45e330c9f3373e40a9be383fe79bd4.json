{"ast":null,"code":"export const usersReducer = (state, action) => {\n  switch (action.type) {\n    case \"LOGIN_SUCCESS\":\n      const user = action.payload;\n      return {\n        user,\n        loggedIn: true\n      };\n\n    case \"FACK_USER\":\n      return {\n        user: action.payload,\n        loggedIn: false\n      };\n\n    case \"LOGOUT_USER\":\n      return action.payload;\n\n    case \"PASS_WRONG\":\n      return action.payload;\n\n    case \"EMAIL_WRONG\":\n      return action.payload;\n\n    case \"GET_USER_LOCAL\":\n      return action.payload;\n\n    default:\n      return state;\n  }\n};\nexport const reducer = (state, action) => {\n  switch (action.type) {\n    case \"FATCH_SUCCESS\":\n      let userLocal = JSON.parse(localStorage.getItem('user'));\n      return { ...state,\n        product: action.payload,\n        userId: userLocal.user._id\n      };\n\n    default:\n      return state;\n  }\n};\nexport const watchReducer = (state, action) => {\n  switch (action.type) {\n    case \"WATCH_ITEM\":\n      const hasItem = state.some(el => el._id === action.payload._id);\n\n      if (!hasItem) {\n        const watch = [...state, action.payload];\n        return watch;\n      } else {\n        return state.filter(el => el._id !== action.payload._id);\n      }\n\n    case \"GET_WATCH_LOCAL\":\n      return action.payload;\n\n    case \"DELETE_ITEM\":\n      return state.filter(el => el._id !== action.payload._id);\n\n    default:\n      return state;\n  }\n};\nexport const basketReducer = (state = {\n  total: 0,\n  items: []\n}, action) => {\n  switch (action.type) {\n    case \"ADD_ITEM\":\n      const hasItem = state.items.some(el => el._id === action.payload._id);\n\n      if (hasItem) {\n        // update item\n        const updateItem = state.items.map(el => {\n          if (el._id === action.payload._id) {\n            return { ...el,\n              quantity: el.quantity + action.payload.quantity\n            };\n          }\n\n          return el; // <-- return current mapped element if no change\n        });\n        const totalPrice = totalprice(updateItem);\n        return { ...state,\n          items: updateItem,\n          total: totalPrice\n        };\n      } else {\n        // add item \n        const item = [...state.items, action.payload];\n        const totalPrice = totalprice(item);\n        return { ...state,\n          items: state.items.concat(action.payload),\n          total: totalPrice,\n          userId: action.payload.userId\n        };\n      }\n\n    case \"INCROMENT\":\n      const updateItems = state.items.map(el => {\n        if (el._id === action.payload._id) {\n          return { ...el,\n            quantity: el.quantity + 1\n          };\n        }\n\n        return el;\n      });\n      const totalsupdateItem = totalprice(updateItems);\n      return {\n        items: updateItems,\n        total: totalsupdateItem\n      };\n\n    case \"DECROMENT\":\n      const updateItemsminus = state.items.map(el => {\n        if (el._id === action.payload._id) {\n          if (el.quantity > 1) {\n            return { ...el,\n              quantity: el.quantity - 1\n            };\n          }\n        }\n\n        return el;\n      });\n      const totalsupdateItemminus = totalprice(updateItemsminus);\n      return {\n        items: updateItemsminus,\n        total: totalsupdateItemminus\n      };\n\n    case \"GET_BASKET_LOCAL\":\n      console.log('local', action.payload);\n      return action.payload;\n\n    case \"DELETE_ITEM\":\n      const deleteiTEM = state.items.filter(el => el._id !== action.payload._id);\n      const totalPriceD = totalprice(deleteiTEM);\n      return { ...state,\n        items: deleteiTEM,\n        total: totalPriceD\n      };\n\n    default:\n      return state;\n  }\n};\n\nconst totalprice = item => {\n  var totals = 0;\n  item.forEach(el => {\n    totals += el.quantity * el.price;\n  });\n  return totals;\n};\n\nexport const itemReducer = (state, action) => {\n  switch (action.type) {\n    case \"FATCH_SUCCESS\":\n      let userLocal = JSON.parse(localStorage.getItem('user'));\n      const data = action.payload;\n      return { ...data,\n        quantity: 1,\n        userId: userLocal.user._id\n      };\n\n    case \"TOGGLE_WATCH\":\n      return { ...state,\n        completed: !action.payload.completed\n      };\n\n    case \"TOGGLE_BASKET\":\n      return { ...state,\n        basket: !action.payload.basket\n      };\n\n    case \"INCROMENT\":\n      return { ...state,\n        quantity: state.quantity + 1\n      };\n\n    case \"DECROMENT\":\n      if (state.quantity > 1) {\n        return { ...state,\n          quantity: state.quantity - 1\n        };\n      } else {\n        return { ...state,\n          quantity: state.quantity\n        };\n      }\n\n    case \"DELETE_ITEM\":\n      return action.payload;\n\n    case \"UPDATE_ITEM\":\n      return action.payload;\n\n    default:\n      return state;\n  }\n};","map":{"version":3,"sources":["/Users/noureddinnasrallah/Documents/online-shop-frontend/src/components/reducers/reducer.js"],"names":["usersReducer","state","action","type","user","payload","loggedIn","reducer","userLocal","JSON","parse","localStorage","getItem","product","userId","_id","watchReducer","hasItem","some","el","watch","filter","basketReducer","total","items","updateItem","map","quantity","totalPrice","totalprice","item","concat","updateItems","totalsupdateItem","updateItemsminus","totalsupdateItemminus","console","log","deleteiTEM","totalPriceD","totals","forEach","price","itemReducer","data","completed","basket"],"mappings":"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","sourcesContent":["export const usersReducer = (state , action) => {\n  switch (action.type) {\n    case \"LOGIN_SUCCESS\":\n      const user = action.payload\n      return {\n        user,\n        loggedIn:true\n      };\n    case \"FACK_USER\":\n      return {\n        user: action.payload,\n        loggedIn:false\n      } \n    case \"LOGOUT_USER\":\n      return action.payload\n    case \"PASS_WRONG\":\n      return action.payload\n    case \"EMAIL_WRONG\":\n      return action.payload\n    case \"GET_USER_LOCAL\":\n      return action.payload\n    default:\n      return state;\n  }\n  \n}\n\nexport const reducer = (state, action) => {\n  switch (action.type) {\n    case \"FATCH_SUCCESS\":\n      let userLocal = JSON.parse(localStorage.getItem('user'));\n      return {\n        ...state,\n        product: action.payload,\n        userId: userLocal.user._id\n      }\n    default:\n      return state;\n  }\n};\n\nexport const watchReducer = (state , action) => {\n  switch (action.type) {\n    case \"WATCH_ITEM\":\n      const hasItem = state.some(el => el._id === action.payload._id);\n      if (!hasItem) {\n        const watch = [...state, action.payload]\n        return watch;\n      } else {\n        return state.filter(el=> el._id !== action.payload._id)\n      }\n      case \"GET_WATCH_LOCAL\":\n       return action.payload\n    case \"DELETE_ITEM\":\n      return state.filter(el=> el._id !== action.payload._id)\n    default:\n      return state;\n  }\n};\n\n    export const basketReducer = (state = { total:0, items:[]}, action) => {\n    switch (action.type) {\n      case \"ADD_ITEM\":\n        const hasItem = state.items.some(el => el._id === action.payload._id);\n      \n        if (hasItem) {\n          // update item\n         const updateItem = state.items.map(el => {\n            if (el._id === action.payload._id) {\n              return {\n                ...el,\n                quantity: el.quantity + action.payload.quantity\n              }\n            }\n            return el; // <-- return current mapped element if no change\n          })\n          const totalPrice = totalprice(updateItem)\n          return {\n            ...state,\n            items: updateItem,\n            total: totalPrice,\n          };\n        } else {\n          // add item \n          const item = [...state.items, action.payload]\n          const totalPrice = totalprice(item)\n          return {\n            ...state,\n            items: state.items.concat(action.payload),\n            total: totalPrice,\n            userId: action.payload.userId\n          };\n        }\n    case \"INCROMENT\":\n      const updateItems = state.items.map(el => {\n        if (el._id === action.payload._id) {\n          return {...el, quantity: el.quantity +1}\n          }\n          return el\n      })\n      const totalsupdateItem = totalprice(updateItems)\n      return {\n        items: updateItems,\n        total: totalsupdateItem\n      }\n      case \"DECROMENT\":\n        const updateItemsminus = state.items.map(el => {\n          if (el._id === action.payload._id) {\n            if (el.quantity > 1) {\n              return {...el, quantity: el.quantity -1}\n            }\n          }\n          return el\n        })\n        const totalsupdateItemminus = totalprice(updateItemsminus)\n        return {\n          items: updateItemsminus,\n          total: totalsupdateItemminus\n        }\n    case \"GET_BASKET_LOCAL\":\n      console.log('local', action.payload)\n     return action.payload\n      case \"DELETE_ITEM\":\n        const deleteiTEM = state.items.filter(el => el._id !== action.payload._id)\n        const totalPriceD = totalprice(deleteiTEM)\n        return {\n          ...state,\n          items: deleteiTEM,\n          total:totalPriceD\n      } \n    default:\n      return state;\n  }\n    };\n\n\nconst totalprice = (item) => {\n  var totals = 0;\n      item.forEach(el => {\n        totals += el.quantity * el.price\n      })\n  return totals\n}\n\n\n\nexport const itemReducer = (state , action) => {\n  switch (action.type) {\n    case \"FATCH_SUCCESS\":\n      let userLocal = JSON.parse(localStorage.getItem('user'));\n      const data = action.payload\n      return {\n        ...data,\n        quantity: 1,\n        userId:userLocal.user._id\n      };\n    case \"TOGGLE_WATCH\":\n      return {\n        ...state,\n        completed: !action.payload.completed,\n      };\n      case \"TOGGLE_BASKET\":\n        return {\n          ...state,\n          basket: !action.payload.basket,\n        };\n    case \"INCROMENT\":\n      return {\n        ...state,\n        quantity: state.quantity + 1\n      }\n    case \"DECROMENT\":\n      if (state.quantity > 1) {\n         return {...state,\n          quantity: state.quantity - 1\n            };\n      } else {\n       return {...state, quantity: state.quantity}\n      }\n    case \"DELETE_ITEM\":\n      return action.payload;\n    case \"UPDATE_ITEM\":\n      return action.payload;\n    default:\n      return state;\n  }\n};\n\n\n\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}