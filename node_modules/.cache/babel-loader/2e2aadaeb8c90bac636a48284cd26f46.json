{"ast":null,"code":"import axios from \"axios\";\nimport { API_ROOT } from \"./service-info\";\nimport { React, useState, useEffect, useContext } from \"react\";\nimport { prodactsConext } from \"../context/contextData\";\nconst {\n  user,\n  dispatch,\n  watch,\n  product\n} = useContext(prodactsConext);\nexport const putReq = (body, id) => {\n  return axios.put(`${API_ROOT}/${id}`, body).then(result => result);\n};\nexport const postReq = body => {\n  return axios.post(`${API_ROOT}/`, body);\n};\nexport const getReq = id => {\n  return axios.get(`${API_ROOT}/${id}`);\n};\nexport const deleteReq = id => {\n  return axios.delete(`${API_ROOT}/${id}`);\n};\nexport const getsReq = () => {\n  return axios.get(`${API_ROOT}/`);\n};\nexport const auth = data => {\n  let token = JSON.parse(localStorage.getItem('x-auth'));\n  axios.defaults.headers.common['x-auth'] = token;\n  return token;\n};\nexport const asyncLocalStorage = {\n  setItem: function (key, value) {\n    return Promise.resolve().then(function () {\n      localStorage.setItem(key, JSON.stringify(value));\n    });\n  },\n  getItem: function (key) {\n    return Promise.resolve().then(function () {\n      return localStorage.getItem(key);\n    });\n  }\n};\nexport const likes = postId => {\n  let data = {\n    like: postId\n  };\n  axios.put(`http://localhost:3001/products/${user.user._id}/like`, data).then(result => {\n    console.log(\"result\", result.data);\n    const checkLike = result.data.likes.some(item => item == el._id);\n\n    if (checkLike) {\n      setlike(true);\n    } else {\n      setlike(false);\n    }\n  });\n};","map":{"version":3,"sources":["/Users/noureddinnasrallah/Documents/online-shop-frontend/src/components/api/rest-helper.js"],"names":["axios","API_ROOT","React","useState","useEffect","useContext","prodactsConext","user","dispatch","watch","product","putReq","body","id","put","then","result","postReq","post","getReq","get","deleteReq","delete","getsReq","auth","data","token","JSON","parse","localStorage","getItem","defaults","headers","common","asyncLocalStorage","setItem","key","value","Promise","resolve","stringify","likes","postId","like","_id","console","log","checkLike","some","item","el","setlike"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport { API_ROOT } from \"./service-info\";\nimport { React, useState, useEffect, useContext } from \"react\";\nimport { prodactsConext } from \"../context/contextData\";\n\nconst { user, dispatch, watch, product } = useContext(prodactsConext);\n\nexport const putReq = (body, id) => {\n    return axios.put(`${API_ROOT}/${id}`, body).then(result => result)\n};\n\nexport const postReq = (body) => {\n    return axios.post(`${API_ROOT}/`, body)\n};\n\nexport const getReq = (id) => {\n return axios.get(`${API_ROOT}/${id}`)\n};\n\nexport const deleteReq = (id) => {\n   return axios.delete(`${API_ROOT}/${id}`)\n}\n\nexport const getsReq = () => {\n    return axios.get(`${API_ROOT}/`);\n};\n\nexport const auth = (data) => {\n    let token = JSON.parse(localStorage.getItem('x-auth'));\n    axios.defaults.headers.common['x-auth'] = token;\n    return token\n}\n\n\nexport const asyncLocalStorage = {\n    setItem: function (key, value) {\n        return Promise.resolve().then(function () {\n            localStorage.setItem(key, JSON.stringify(value));\n        });\n    },\n    getItem: function (key) {\n        return Promise.resolve().then(function () {\n            return localStorage.getItem(key);\n        });\n    }\n};\n  \nexport const likes = (postId) => {\n    let data = { like: postId };\n\n    axios\n      .put(`http://localhost:3001/products/${user.user._id}/like`, data)\n      .then((result) => {\n        console.log(\"result\", result.data);\n        const checkLike = result.data.likes.some((item) => item == el._id);\n        if (checkLike){\n          setlike(true);\n        } else {\n          setlike(false);\n        }\n      });\n  };\n\n\n\n"]},"metadata":{},"sourceType":"module"}