{"ast":null,"code":"import axios from \"axios\";\nimport { API_ROOT } from \"./service-info\";\nimport { React, useContext } from \"react\";\nimport { prodactsConext } from \"../context/contextData\";\nconst {\n  dispatch,\n  user\n} = useContext(prodactsConext);\nexport const putReq = (body, id) => {\n  return axios.put(`${API_ROOT}/${id}`, body).then(result => result);\n};\nexport const postReq = body => {\n  return axios.post(`${API_ROOT}/`, body);\n};\nexport const getReq = id => {\n  return axios.get(`${API_ROOT}/${id}`);\n};\nexport const deleteReq = id => {\n  return axios.delete(`${API_ROOT}/${id}`);\n};\nexport const getsReq = () => {\n  return axios.get(`${API_ROOT}/`);\n};\nexport const auth = data => {\n  let token = JSON.parse(localStorage.getItem('x-auth'));\n  axios.defaults.headers.common['x-auth'] = token;\n  return token;\n};\nexport const asyncLocalStorage = {\n  setItem: function (key, value) {\n    return Promise.resolve().then(function () {\n      localStorage.setItem(key, JSON.stringify(value));\n    });\n  },\n  getItem: function (key) {\n    return Promise.resolve().then(function () {\n      return localStorage.getItem(key);\n    });\n  }\n};\nexport const likes = postId => {\n  let data = {\n    like: postId\n  };\n  axios.put(`http://localhost:3001/products/${user.user._id}/like`, data).then(result => {\n    dispatch({\n      type: \"ADD_LIKE\",\n      payload: result.data.likes\n    });\n  });\n};","map":{"version":3,"sources":["/Users/noureddinnasrallah/Documents/online-shop-frontend/src/components/api/rest-helper.js"],"names":["axios","API_ROOT","React","useContext","prodactsConext","dispatch","user","putReq","body","id","put","then","result","postReq","post","getReq","get","deleteReq","delete","getsReq","auth","data","token","JSON","parse","localStorage","getItem","defaults","headers","common","asyncLocalStorage","setItem","key","value","Promise","resolve","stringify","likes","postId","like","_id","type","payload"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,QAAyB,gBAAzB;AACA,SAASC,KAAT,EAAeC,UAAf,QAAiC,OAAjC;AACA,SAASC,cAAT,QAA+B,wBAA/B;AAEA,MAAM;AAAEC,EAAAA,QAAF;AAAYC,EAAAA;AAAZ,IAAqBH,UAAU,CAACC,cAAD,CAArC;AAEA,OAAO,MAAMG,MAAM,GAAG,CAACC,IAAD,EAAOC,EAAP,KAAc;AAChC,SAAOT,KAAK,CAACU,GAAN,CAAW,GAAET,QAAS,IAAGQ,EAAG,EAA5B,EAA+BD,IAA/B,EAAqCG,IAArC,CAA0CC,MAAM,IAAIA,MAApD,CAAP;AACH,CAFM;AAIP,OAAO,MAAMC,OAAO,GAAIL,IAAD,IAAU;AAC7B,SAAOR,KAAK,CAACc,IAAN,CAAY,GAAEb,QAAS,GAAvB,EAA2BO,IAA3B,CAAP;AACH,CAFM;AAIP,OAAO,MAAMO,MAAM,GAAIN,EAAD,IAAQ;AAC7B,SAAOT,KAAK,CAACgB,GAAN,CAAW,GAAEf,QAAS,IAAGQ,EAAG,EAA5B,CAAP;AACA,CAFM;AAIP,OAAO,MAAMQ,SAAS,GAAIR,EAAD,IAAQ;AAC9B,SAAOT,KAAK,CAACkB,MAAN,CAAc,GAAEjB,QAAS,IAAGQ,EAAG,EAA/B,CAAP;AACF,CAFM;AAIP,OAAO,MAAMU,OAAO,GAAG,MAAM;AACzB,SAAOnB,KAAK,CAACgB,GAAN,CAAW,GAAEf,QAAS,GAAtB,CAAP;AACH,CAFM;AAIP,OAAO,MAAMmB,IAAI,GAAIC,IAAD,IAAU;AAC1B,MAAIC,KAAK,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAX,CAAZ;AACA1B,EAAAA,KAAK,CAAC2B,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,QAA9B,IAA0CP,KAA1C;AACA,SAAOA,KAAP;AACH,CAJM;AAOP,OAAO,MAAMQ,iBAAiB,GAAG;AAC7BC,EAAAA,OAAO,EAAE,UAAUC,GAAV,EAAeC,KAAf,EAAsB;AAC3B,WAAOC,OAAO,CAACC,OAAR,GAAkBxB,IAAlB,CAAuB,YAAY;AACtCc,MAAAA,YAAY,CAACM,OAAb,CAAqBC,GAArB,EAA0BT,IAAI,CAACa,SAAL,CAAeH,KAAf,CAA1B;AACH,KAFM,CAAP;AAGH,GAL4B;AAM7BP,EAAAA,OAAO,EAAE,UAAUM,GAAV,EAAe;AACpB,WAAOE,OAAO,CAACC,OAAR,GAAkBxB,IAAlB,CAAuB,YAAY;AACtC,aAAOc,YAAY,CAACC,OAAb,CAAqBM,GAArB,CAAP;AACH,KAFM,CAAP;AAGH;AAV4B,CAA1B;AAaP,OAAO,MAAMK,KAAK,GAAIC,MAAD,IAAY;AAC7B,MAAIjB,IAAI,GAAG;AAAEkB,IAAAA,IAAI,EAAED;AAAR,GAAX;AAEAtC,EAAAA,KAAK,CACFU,GADH,CACQ,kCAAiCJ,IAAI,CAACA,IAAL,CAAUkC,GAAI,OADvD,EAC+DnB,IAD/D,EAEGV,IAFH,CAESC,MAAD,IAAY;AACdP,IAAAA,QAAQ,CAAC;AAACoC,MAAAA,IAAI,EAAC,UAAN;AAAkBC,MAAAA,OAAO,EAAC9B,MAAM,CAACS,IAAP,CAAYgB;AAAtC,KAAD,CAAR;AACH,GAJH;AAKD,CARI","sourcesContent":["import axios from \"axios\";\nimport { API_ROOT } from \"./service-info\";\nimport { React,useContext } from \"react\";\nimport { prodactsConext } from \"../context/contextData\";\n\nconst { dispatch, user } = useContext(prodactsConext);\n\nexport const putReq = (body, id) => {\n    return axios.put(`${API_ROOT}/${id}`, body).then(result => result)\n};\n\nexport const postReq = (body) => {\n    return axios.post(`${API_ROOT}/`, body)\n};\n\nexport const getReq = (id) => {\n return axios.get(`${API_ROOT}/${id}`)\n};\n\nexport const deleteReq = (id) => {\n   return axios.delete(`${API_ROOT}/${id}`)\n}\n\nexport const getsReq = () => {\n    return axios.get(`${API_ROOT}/`);\n};\n\nexport const auth = (data) => {\n    let token = JSON.parse(localStorage.getItem('x-auth'));\n    axios.defaults.headers.common['x-auth'] = token;\n    return token\n}\n\n\nexport const asyncLocalStorage = {\n    setItem: function (key, value) {\n        return Promise.resolve().then(function () {\n            localStorage.setItem(key, JSON.stringify(value));\n        });\n    },\n    getItem: function (key) {\n        return Promise.resolve().then(function () {\n            return localStorage.getItem(key);\n        });\n    }\n};\n  \nexport const likes = (postId) => {\n    let data = { like: postId };\n\n    axios\n      .put(`http://localhost:3001/products/${user.user._id}/like`, data)\n      .then((result) => {\n          dispatch({type:\"ADD_LIKE\", payload:result.data.likes})\n      });\n  };\n\n\n\n"]},"metadata":{},"sourceType":"module"}